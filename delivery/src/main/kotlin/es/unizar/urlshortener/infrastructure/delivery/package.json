{
  "openapi":"3.0.1",
  "info":{
    "title":"OpenAPI definition",
    "version":"v0"
  },
  "servers":[
    {
      "url":"http://localhost:8080",
      "description":"Generated server url"
    }
  ],
  "paths":{
    "/api/link":{
      "post":{
        "tags":[
          "url-shortener-controller-impl"
        ],
        "operationId":"shortener",
        "parameters":[
          {
            "name":"data",
            "in":"query",
            "required":true,
            "schema":{
              "$ref":"#/components/schemas/ShortUrlDataIn"
            }
          },
          {
            "name":"$completion",
            "in":"query",
            "required":false,
            "schema":{
              "$ref":"#/components/schemas/ContinuationObject"
            }
          }
        ],
        "responses":{
          "200":{
            "description":"OK",
            "content":{
              "*/*":{
                "schema":{
                  "$ref":"#/components/schemas/ShortUrlDataOut"
                }
              }
            }
          },
          "400":{
            "description":"Bad Request",
            "content":{
              "*/*":{
                "schema":{
                  "$ref":"#/components/schemas/ErrorMessage"
                }
              }
            }
          },
          "403":{
            "description":"Forbidden",
            "content":{
              "*/*":{
                "schema":{
                  "$ref":"#/components/schemas/ErrorMessage"
                }
              }
            }
          },
          "404":{
            "description":"Not Found",
            "content":{
              "*/*":{
                "schema":{
                  "$ref":"#/components/schemas/ErrorMessage"
                }
              }
            }
          }
        }
      }
    },
    "/{id}":{
      "get":{
        "tags":[
          "url-shortener-controller-impl"
        ],
        "operationId":"redirectTo",
        "parameters":[
          {
            "name":"id",
            "in":"path",
            "required":true,
            "schema":{
              "type":"string"
            }
          }
        ],
        "responses":{
          "302": {
            "description": "Redirection to the target URL",
            "headers": {
              "Location": {
                "description": "The target URL",
                "schema":{
                  "$ref":"#/components/schemas/ErrorMessage"
                }
              }
            }
          },
          "503": {
            "description": "The URL has not been verified yet",
            "headers": {
              "Retry-After": {
                "description": "The time when the URL is expected to be verified",
                "schema":{
                  "$ref":"#/components/schemas/ErrorMessage"
                }
              }
            }
          },
          "403": {
            "description": "The URL is not safe",
            "schema":{
              "$ref":"#/components/schemas/ErrorMessage"
            }
          }
        }
      }
    },
    "/{hash}/qr":{
      "get":{
        "tags":[
          "url-shortener-controller-impl"
        ],
        "operationId":"generateQR",
        "parameters":[
          {
            "name":"hash",
            "in":"path",
            "required":true,
            "schema":{
              "type":"string"
            }
          }
        ],
        "responses":{
          "200":{
            "description":"OK",
            "content":{
              "*/*":{
                "schema":{
                  "type":"string",
                  "format":"binary"
                }
              }
            }
          },
          "400":{
            "description":"Bad Request",
            "content":{
              "*/*":{
                "schema":{
                  "$ref":"#/components/schemas/ErrorMessage"
                }
              }
            }
          },
          "403":{
            "description":"Forbidden",
            "content":{
              "*/*":{
                "schema":{
                  "$ref":"#/components/schemas/ErrorMessage"
                }
              }
            }
          },
          "404":{
            "description":"Not Found",
            "content":{
              "*/*":{
                "schema":{
                  "$ref":"#/components/schemas/ErrorMessage"
                }
              }
            }
          }
        }
      }
    },
    "/api/link/{id}":{
      "get":{
        "tags":[
          "info-http-header-controller-impl"
        ],
        "operationId":"getInfo",
        "parameters":[
          {
            "name":"id",
            "in":"path",
            "required":true,
            "schema":{
              "type":"string"
            }
          }
        ],
        "responses":{
          "200":{
            "description":"OK",
            "content":{
              "*/*":{
                "schema":{
                  "type":"array",
                  "items":{
                    "$ref":"#/components/schemas/ClickOut"
                  }
                }
              }
            }
          },
          "400":{
            "description":"Bad Request",
            "content":{
              "*/*":{
                "schema":{
                  "$ref":"#/components/schemas/ErrorMessage"
                }
              }
            }
          },
          "403":{
            "description":"Forbidden",
            "content":{
              "*/*":{
                "schema":{
                  "$ref":"#/components/schemas/ErrorMessage"
                }
              }
            }
          },
          "404":{
            "description":"Not Found",
            "content":{
              "*/*":{
                "schema":{
                  "$ref":"#/components/schemas/ErrorMessage"
                }
              }
            }
          }
        }
      }
    }
  },
  "components":{
    "schemas":{
      "ErrorMessage":{
        "type":"object",
        "properties":{
          "statusCode":{
            "type":"integer",
            "format":"int32"
          },
          "message":{
            "type":"string"
          },
          "timestamp":{
            "type":"string"
          }
        }
      },
      "ShortUrlDataIn":{
        "type":"object",
        "properties":{
          "url":{
            "type":"string"
          },
          "wantQR":{
            "type":"string"
          },
          "sponsor":{
            "type":"string"
          }
        }
      },
      "ContinuationObject":{
        "type":"object",
        "properties":{
          "context":{
            "$ref":"#/components/schemas/CoroutineContext"
          }
        }
      },
      "CoroutineContext":{
        "type":"object"
      },
      "ShortUrlDataOut":{
        "type":"object",
        "properties":{
          "url":{
            "type":"string",
            "format":"uri"
          },
          "qr":{
            "type":"string",
            "format":"uri"
          },
          "properties":{
            "type":"object",
            "additionalProperties":{
              "type":"object"
            }
          }
        }
      },
      "ClickOut":{
        "type":"object",
        "properties":{
          "hash":{
            "type":"string"
          },
          "browser":{
            "type":"string"
          },
          "platform":{
            "type":"string"
          },
          "created":{
            "type":"string",
            "format":"date-time"
          }
        }
      }
    }
  }
}